(function(b){b.mnTextSelector={};b.fn.mnTextSelector=function(c){function j(){var a="";window.getSelection?a=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(a=document.selection.createRange().text);return a}c=b.extend({fontSize:10,fontColor:"#fff",backgroundColor:"#000",hoverBackgroundColor:"rgb(80,25,180)",border:"1px solid #000",highlightBorder:"1px solid #ccc"},c);var f=[],h={border:c.border,position:"absolute",overflow:"hidden"},k={fontSize:c.fontSize,
backgroundColor:c.backgroundColor,border:c.border,borderTop:c.highlightBorder,color:c.fontColor,padding:"5px 8px","float":"left"},m={backgroundColor:c.hoverBackgroundColor};b.mnTextSelector.showOptions=function(){var a=document.selection,d=0,e=0;a?"Control"!=a.type&&(a=a.createRange(),a.collapse(!0),d=a.boundingLeft,e=a.boundingTop):window.getSelection&&(a=window.getSelection(),a.rangeCount&&(a=a.getRangeAt(0).cloneRange(),a.getClientRects&&(a.collapse(!0),e=a.getClientRects()[0],d=e.left+b(window).scrollLeft(),
e=e.top+b(window).scrollTop())));h.top=e;h.left=d;var c=j(),c=encodeURIComponent(c),d='<div class="mnTextSelector">';if(f.length)for(var g,a=0;a<f.length;a++)e=f[a].label,g=f[a].callback,"function"==typeof g&&(b.mnTextSelector.tempMethod=function(a){f[a].callback.call(this,c)},g='javascript:;" onclick="$.mnTextSelector.tempMethod('+a+")"),d+='<a href="'+g+'">'+e+"</a>";else d+="<span>No options available...</span>";b(d+"</div>").css(h).appendTo("body").show();b(".mnTextSelector").find("a, span").css(k);
b(".mnTextSelector").find("a").on("mouseover",function(){b(this).css(m)}).on("mouseout",function(){b(this).css(k)})};b.mnTextSelector.hideOptions=function(){b(".mnTextSelector").remove()};b.mnTextSelector.addOption=function(a,b){var c={};c.label=a;c.callback=b;f[f.length]=c};var l;return this.each(function(){b(this).mouseup(function(){b.mnTextSelector.hideOptions();clearTimeout(l);l=setTimeout(function(){""!=j()&&b.mnTextSelector.showOptions()},500)});b(document).click(function(){b.mnTextSelector.hideOptions()})})}})(jQuery);
